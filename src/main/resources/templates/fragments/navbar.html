<nav th:fragment="navbar" class="navbar navbar-dark px-3 py-2"
  style="background-color: #000000; position: fixed; top: 0; z-index: 1000;">
  <div class="container-fluid d-flex align-items-center justify-content-between gap-3">

    <!-- Left: Logo and Navigation Arrows -->
    <div class="d-flex align-items-center gap-4">
      <!-- Navigation Arrows -->
      <div class="d-flex gap-2">
        <button class="btn btn-dark rounded-circle p-2 d-flex align-items-center justify-content-center"
          style="width: 32px; height: 32px;" disabled>
          <i class="bi bi-chevron-left fs-5"></i>
        </button>
        <button class="btn btn-dark rounded-circle p-2 d-flex align-items-center justify-content-center"
          style="width: 32px; height: 32px;" disabled>
          <i class="bi bi-chevron-right fs-5"></i>
        </button>
      </div>

      <!-- Logo -->
      <a href="dashboard" class="me-3 d-flex align-items-center text-decoration-none">
        <img src="img/logoweb.png" alt="Logo" width="40" height="40" class="d-none d-sm-block" />
        <img src="img/logonavbar.png" alt="Logo" width="32" height="32" class="d-sm-none" />
      </a>
    </div>

    <!-- Center: Search Bar -->
   <form class="d-flex flex-grow-1 mx-3 position-relative" action="/search" method="get" style="max-width: 600px;"
  role="search" aria-label="Site Search">
  <div class="search-container position-relative w-100">
    <input type="search" class="form-control search-input" placeholder="Cari lagu, artis, atau playlist..." name="query"
      aria-label="Search music, artists, playlists" required />
    <button type="submit" class="btn search-btn" aria-label="Search">
      <i class="bi bi-search text-white"></i>
    </button>
  </div>
</form>

    <!-- Right: User Controls -->
    <div class="d-flex align-items-center gap-3">

      <!-- Notifications -->
      <button class="btn btn-dark rounded-circle p-2 d-flex align-items-center justify-content-center"
        style="width: 32px; height: 32px;" aria-label="Notifications">
        <i class="bi bi-bell fs-5"></i>
      </button>

      <!-- Friends -->
      <button class="btn btn-dark rounded-circle p-2 d-flex align-items-center justify-content-center"
        style="width: 32px; height: 32px;" aria-label="Friends">
        <i class="bi bi-people fs-5"></i>
      </button>

      <!-- User Profile with Hover Dropdown -->
      <div class="profile-dropdown-container position-relative">
        <button class="btn btn-dark d-flex align-items-center gap-2 p-1 profile-btn"
          style="background: transparent; border: none;">
          <!-- Profile Image or Initial -->
          <div class="profile-avatar">
            <div th:if="${user.images != null and !user.images.isEmpty()}">
              <img th:src="${user.images[0].url}" alt="Profile" class="rounded-circle"
                style="width: 28px; height: 28px; object-fit: cover;">
            </div>
            <div th:unless="${user.images != null and !user.images.isEmpty()}"
              class="rounded-circle bg-secondary d-flex align-items-center justify-content-center"
              style="width: 28px; height: 28px;">
              <span th:text="${user.display_name.substring(0,1)}" class="fw-bold"></span>
            </div>
          </div>
          <span class="profile-name d-none d-lg-inline" th:text="${user.display_name}"></span>
          <i class="bi bi-chevron-down profile-arrow"></i>
        </button>

        <!-- Dropdown Content -->
        <div class="profile-dropdown-content bg-dark text-white border rounded shadow-sm p-2"
          style="position: absolute; top: 100%; right: 0; min-width: 200px; display: none; z-index: 1000;">
          <div class="px-2 py-1 small text-muted" th:text="${user.display_name}"></div>
          <div class="dropdown-divider border-secondary my-1"></div>
          <a href="/account" class="dropdown-item text-decoration-none px-2 py-1 d-block">
            <i class="bi bi-person me-2"></i> Account
          </a>
          <a href="/profile" class="dropdown-item text-decoration-none px-2 py-1 d-block">
            <i class="bi bi-gear me-2"></i> Settings
          </a>
          <div class="dropdown-divider border-secondary my-1"></div>
          <a href="#" onclick="logoutSpotify()"
            class="dropdown-item text-danger text-decoration-none px-2 py-1 d-block">
            <i class="bi bi-box-arrow-right me-2"></i> Logout
          </a>

        </div>
      </div>
    </div>
  </div>

</nav>